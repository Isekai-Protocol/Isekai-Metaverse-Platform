(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0024b003"],{1741:function(t,i,a){},"1af6":function(t,i,a){var e=a("63b6");e(e.S,"Array",{isArray:a("9003")})},"20fd":function(t,i,a){"use strict";var e=a("d9f6"),s=a("aebd");t.exports=function(t,i,a){i in t?e.f(t,i,s(0,a)):t[i]=a}},"37e6":function(t,i,a){"use strict";var e=a("1741"),s=a.n(e);s.a},"549b":function(t,i,a){"use strict";var e=a("d864"),s=a("63b6"),l=a("241e"),c=a("b0dc"),o=a("3702"),d=a("b447"),n=a("20fd"),r=a("7cd6");s(s.S+s.F*!a("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var i,a,s,u,p=l(t),m="function"==typeof this?this:Array,g=arguments.length,f=g>1?arguments[1]:void 0,h=void 0!==f,v=0,k=r(p);if(h&&(f=e(f,g>2?arguments[2]:void 0,2)),void 0==k||m==Array&&o(k))for(i=d(p.length),a=new m(i);i>v;v++)n(a,v,h?f(p[v],v):p[v]);else for(u=k.call(p),a=new m;!(s=u.next()).done;v++)n(a,v,h?c(u,f,[s.value,v],!0):s.value);return a.length=v,a}})},"54a16":function(t,i,a){a("6c1c"),a("1654"),t.exports=a("95d5")},"75fc":function(t,i,a){"use strict";var e=a("a745"),s=a.n(e);function l(t){if(s()(t)){for(var i=0,a=new Array(t.length);i<t.length;i++)a[i]=t[i];return a}}var c=a("774e"),o=a.n(c),d=a("c8bb"),n=a.n(d);function r(t){if(n()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return l(t)||r(t)||u()}a.d(i,"a",function(){return p})},"774e":function(t,i,a){t.exports=a("d2d5")},"7acd":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"set"},[a("div",{staticClass:"top u-f-item cursor",on:{click:t.backClick}},[t._m(0),a("p",{staticClass:"topTitle"},[t._v("创建项目")])]),a("div",{staticClass:"establish"},[a("div",{staticClass:"role"},[a("div",{staticClass:"roleImg u-f-item u-f-justify cursor"},[t.findgoodsdetail.role_img?a("el-image",{staticClass:"img",staticStyle:{"border-radius":"10px"},attrs:{src:t.findgoodsdetail.role_img,alt:"",fit:"cover"}}):a("div",{staticStyle:{width:"22px",height:"22px"},on:{click:function(i){t.dialogVisible=!0}}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1),a("p",{staticClass:"newPurse cursor",on:{click:function(i){t.dialogVisible=!0}}},[t._v(t._s(t.findgoodsdetail.image_url?"更换角色":"选择角色"))])]),a("div",{staticClass:"preview"},[a("div",[a("el-upload",{ref:"mYupload",staticClass:"upload-demo",attrs:{action:t.action,multiple:!1,"show-file-list":!1,"on-success":t.onbackgroundSuccess,data:t.uploadingDataImg,accept:".jpg,.jpeg,.png,.gif,.svg"}},[a("div",{staticClass:"headImg u-f-item u-f-justify cursor",staticStyle:{width:"158px"}},[t.addisekai.image_Url?a("el-image",{staticClass:"img",attrs:{src:t.addisekai.image_Url,fit:"cover"}}):a("div",{staticStyle:{width:"22px",height:"22px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1)])],1),a("p",{staticClass:"singleLine name"},[t._v(t._s(t.addisekai.name||"请输入项目名称"))]),t._m(1)]),a("p",{staticClass:"establishItemName"},[t._v("项目名称")]),a("div",{staticClass:"inputBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addisekai.name,expression:"addisekai.name"}],attrs:{type:"text",name:"",id:"",placeholder:"请输入项目名称"},domProps:{value:t.addisekai.name},on:{input:function(i){i.target.composing||t.$set(t.addisekai,"name",i.target.value)}}})]),t.$route.query.goodsId?t._e():a("div",[a("p",{staticClass:"establishItemName",staticStyle:{"margin-bottom":"15px"}},[t._v("项目类别")]),a("div",{staticClass:"u-f-item mb20"},t._l(t.multipleList,function(i,e){return a("div",{key:e,staticClass:"multipleItem u-f-item cursor",on:{click:function(a){return t.multipleItemClick(i.type)}}},[a("div",{staticClass:"multiple u-f-justify"},[t.addisekai.type==i.type?a("div",{staticClass:"multiplePitch"}):t._e()]),a("p",{staticClass:"multipleName"},[t._v(t._s(i.name))])])}),0)]),a("el-collapse-transition",[4==t.addisekai.type?a("div",[a("p",{staticClass:"establishItemName",staticStyle:{"margin-bottom":"15px"}},[t._v("插画类型")]),a("div",{staticClass:"u-f-item mb20"},t._l(t.ikonList,function(i,e){return a("div",{key:e,staticClass:"multipleItem u-f-item cursor",on:{click:function(a){return t.ikonClick(i.type)}}},[a("div",{staticClass:"multiple u-f-justify"},[t.addisekai.img_type==i.type?a("div",{staticClass:"multiplePitch"}):t._e()]),a("p",{staticClass:"multipleName"},[t._v(t._s(i.name))])])}),0)]):t._e()]),a("el-collapse-transition",[2==t.addisekai.type?a("div",[a("p",{staticClass:"establishItemName",staticStyle:{"margin-bottom":"15px"}},[t._v("音频类型")]),a("div",{staticClass:"u-f-item mb20"},t._l(t.audioList,function(i,e){return a("div",{key:e,staticClass:"multipleItem u-f-item cursor",on:{click:function(a){return t.audioClick(i.type)}}},[a("div",{staticClass:"multiple u-f-justify"},[t.addisekai.music_type==i.type?a("div",{staticClass:"multiplePitch"}):t._e()]),a("p",{staticClass:"multipleName"},[t._v(t._s(i.name))])])}),0)]):t._e()]),a("p",{staticClass:"establishItemName"},[t._v("上传文件")]),a("div",{staticClass:"u-f-item mb20"},[a("el-upload",{ref:"mYupload1",staticClass:"upload-demo",attrs:{action:t.action,multiple:!1,"show-file-list":!0,"on-success":t.onFileSuccess,data:t.uploadingData,accept:t.type}},[a("div",{staticClass:"headImg  ",staticStyle:{width:"259px"}},[4==t.addisekai.type?a("div",{staticClass:"u-f-item u-f-justify cursor",staticStyle:{width:"100%",height:"100%"}},[t.addisekai.url?a("el-image",{staticClass:"img",attrs:{src:t.addisekai.url,fit:"cover"}}):a("div",{staticStyle:{width:"22px",height:"22px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1):t._e(),2==t.addisekai.type?a("div",{staticClass:"u-f-item u-f-justify cursor",staticStyle:{width:"100%",height:"100%"}},[t.addisekai.url?t._e():a("div",{staticStyle:{width:"22px",height:"22px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])]):t._e(),1==t.addisekai.type?a("div",{staticClass:"u-f-item u-f-justify cursor",staticStyle:{width:"100%",height:"100%"}},[t.addisekai.url?t._e():a("div",{staticStyle:{width:"22px",height:"22px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])]):t._e()])]),a("p",{staticClass:"hint"},[t._v("文件支持类型："+t._s(t.type))])],1),a("p",{staticClass:"establishItemName"},[t._v("项目封面")]),a("div",{staticClass:"u-f-item mb20"},[a("el-upload",{ref:"mYupload",staticClass:"upload-demo",attrs:{action:t.action,multiple:!1,"show-file-list":!0,"on-success":t.onbackgroundSuccess,data:t.uploadingDataImg,accept:".jpg,.jpeg,.png,.gif,.svg"}},[a("div",{staticClass:"headImg u-f-item u-f-justify cursor"},[t.addisekai.image_Url?a("el-image",{staticClass:"img",attrs:{src:t.addisekai.image_Url,fit:"cover"}}):a("div",{staticStyle:{width:"22px",height:"22px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1)]),a("p",{staticClass:"hint"},[t._v("建议尺寸1：1")])],1),a("p",{staticClass:"establishItemName"},[t._v("项目描述")]),a("el-input",{staticClass:"elInput",attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:t.addisekai.desc,callback:function(i){t.$set(t.addisekai,"desc",i)},expression:"addisekai.desc"}}),a("p",{staticClass:"establishItemName"},[t._v("版税")]),a("div",{staticClass:"u-f"},[a("div",{staticClass:"walletAddress"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addisekai.wallet_url,expression:"addisekai.wallet_url"}],attrs:{type:"text",placeholder:"请输入钱包地址"},domProps:{value:t.addisekai.wallet_url},on:{input:function(i){i.target.composing||t.$set(t.addisekai,"wallet_url",i.target.value)}}})]),a("div",{staticClass:"royalty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addisekai.royalties,expression:"addisekai.royalties"}],attrs:{type:"number",placeholder:"请输入版税"},domProps:{value:t.addisekai.royalties},on:{input:function(i){i.target.composing||t.$set(t.addisekai,"royalties",i.target.value)}}})]),a("p",{staticClass:"perCent"},[t._v("%")])]),a("p",{staticClass:"text"},[t._v("每次售出您的商品时，您都可以获得销售价格的一定百分比。")]),a("p",{staticClass:"establishItemName"},[t._v("选择专辑")]),t.albumList.length?a("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请选择","popper-class":"select","popper-append-to-body":!1},model:{value:t.addisekai.cate_id,callback:function(i){t.$set(t.addisekai,"cate_id",i)},expression:"addisekai.cate_id"}},t._l(t.albumList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):a("div",{staticClass:"notAvailable mb20 cursor",on:{click:t.establishAlbum}},[t._v("\n\t\t\t暂无专辑，去创建\n\t\t")]),a("div",{staticClass:"u-f-item u-f-jsb",staticStyle:{width:"600px"}},[a("p",{staticClass:"establishItemName"},[t._v("购买后解锁")]),a("div",{staticClass:"mb20"},[a("el-switch",{attrs:{"active-color":"#6A78BA","inactive-color":"#2D3350"},model:{value:t.addisekai.buy_lock,callback:function(i){t.$set(t.addisekai,"buy_lock",i)},expression:"addisekai.buy_lock"}})],1)]),a("el-input",{staticClass:"elInput",attrs:{type:"textarea",rows:6,placeholder:"输入内容（访问密钥、兑换代码、文件链接等）"},model:{value:t.addisekai.links,callback:function(i){t.$set(t.addisekai,"links",i)},expression:"addisekai.links"}}),a("p",{staticClass:"hint",staticStyle:{margin:"0"}},[t._v("支持Markdown语法")]),a("div",{staticClass:"operation u-f"},[t.addisekai.is_draft?a("div",{staticClass:"save cursor",on:{click:function(i){return t.saveClick(1)}}},[t._v("保存草稿")]):t._e(),a("div",{staticClass:"creator cursor",on:{click:function(i){return t.saveClick(0)}}},[t._v(t._s(t.addisekai.is_draft?"创建":"修改"))])])],1),a("popUp",{attrs:{title:"选择角色",showDialog:t.dialogVisible,width:"1300px"},on:{showDialogClick:function(i){t.dialogVisible=!1}}},[a("div",{staticStyle:{padding:"30px"}},[a("div",{staticClass:"nftList u-f",on:{scroll:t.scroll}},[t._l(t.nftList,function(i,e){return a("div",{key:e,staticClass:"popUpListItem cursor",on:{click:function(a){return t.nftItemClick(i)}}},[a("div",{staticClass:"popUpListItemImg"},[a("el-image",{staticClass:"img",staticStyle:{"border-radius":"10px"},attrs:{src:i.image_url+"?x-oss-process=image/crop,x_750,y_350,w_1200,h_1200",lazy:!0,alt:"",fit:"cover"}})],1),a("p",{staticClass:"popUpListItemName singleLine"},[t._v(t._s(i.name))]),a("p",{staticClass:"popUpListItemserial"},[t._v("#"+t._s(i.bn))])])}),t._l(10,function(t,i){return a("i",{staticClass:"amplificationicon"})})],2)])])],1)},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{width:"21px",height:"19px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/88.png",alt:""}})])},function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{width:"109px",height:"20px"}},[a("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img1/70.png",alt:""}})])}],l=(a("7f7f"),a("84b4"),a("ac6a"),a("f3e2"),a("75fc")),c=a("4b90"),o=a("50c5"),d={components:{popUp:o["a"]},data:function(){return{radio:1,multipleList:[{name:"插画",type:4},{name:"音频",type:2},{name:"文章",type:1}],ikonList:[{name:"封面",type:1},{name:"立绘",type:2},{name:"背景",type:3}],audioList:[{name:"配乐",type:1},{name:"配音",type:2}],textarea:"",dialogVisible:!1,pitchItem:{},findgoodsdetail:{},nftList:[],page:1,count:0,albumList:[],addisekai:{method:"notice.addisekai",name:"",desc:"",image_Url:"",image_id:"",url:"",links:"",cate_id:"",buy_lock:!0,role_id:"",music_type:1,id:"",type:4,is_draft:1,work_id:"",img_type:1,royalties:"",wallet_url:""},action:c["a"].baseURL,uploadingDataImg:{method:"images.upload"}}},created:function(){this.$route.query.goodsId?this.getIsekaiinfo(this.$route.query.goodsId,this.$route.query.workId):this.$route.query.roleId&&this.getFindgoodsdetail(this.$route.query.roleId),this.getrolelist(),this.getArticleType()},computed:{type:function(){return 1==this.addisekai.type?".txt":2==this.addisekai.type?".mp3,.wav,.ogg,.mp4,.webm":4==this.addisekai.type?".jpg,.jpeg,.png,.gif,.svg,.glb,.gltf":void 0},uploadingData:function(){return 1==this.addisekai.type?{method:"images.uploadarticle"}:2==this.addisekai.type?{method:"images.uploadaudio"}:4==this.addisekai.type?{method:"images.upload"}:void 0}},methods:{backClick:function(){this.$router.go(-1)},multipleItemClick:function(t){this.addisekai.type!=t&&(this.addisekai.type=t,this.addisekai.cate_id="",this.albumList=[],this.addisekai.url="",this.getArticleType())},establishAlbum:function(){this.$router.push({path:"/framer/createAlbum"})},mouseenter:function(t){this.pitchItem=t},mouseleave:function(t){this.pitchItem=null},getFindgoodsdetail:function(t){var i=this;this.$post({method:"goods.findgoodsdetail",id:t}).then(function(t){i.findgoodsdetail=t.data.data,i.addisekai.role_id=t.data.data.id,i.dialogVisible=!1})},getIsekaiinfo:function(t,i){var a=this;this.$post({method:"notice.isekaiinfo",work_id:i,id:t}).then(function(t){var i=t.data.data;i.method="notice.addisekai",a.addisekai=i,a.getFindgoodsdetail(i.role_id)})},getrolelist:function(){var t=this;this.$post({page:this.page,limit:20,type:-1,method:"goods.getrolelist"}).then(function(i){t.count=i.data.data.count,t.nftList=[].concat(Object(l["a"])(t.nftList),Object(l["a"])(i.data.data.list))})},getArticleType:function(){var t=this;this.$post({page:1,limit:999,type:-1,cate:this.addisekai.type,method:"articles.getArticleType",is_my:1}).then(function(i){var a=i.data.data.list;a.length?a.forEach(function(i){var a={};a.label=i.type_name,a.value=i.id,t.albumList.push(a)}):t.albumList=[]})},scroll:function(t){var i=t.target.scrollTop,a=t.target.clientHeight,e=t.target.scrollHeight;Math.trunc(i+a+100)>=e&&this.nftList.length<this.count&&(this.page++,this.getrolelist())},nftItemClick:function(t){this.getFindgoodsdetail(t.id)},onbackgroundSuccess:function(t){var i=this;this.$message({message:t.msg,duration:1500,onClose:function(){i.$refs["mYupload"].clearFiles()}}),t.status&&(this.addisekai.image_Url=t.data.url,this.addisekai.image_id=t.data.url)},onFileSuccess:function(t){var i=this;this.$message({message:t.msg,duration:1500,onClose:function(){i.$refs["mYupload1"].clearFiles()}}),t.status&&(this.addisekai.url=t.data.url,4==this.addisekai.type&&(this.addisekai.image_Url=t.data.url,this.addisekai.image_id=t.data.url))},audioClick:function(t){this.addisekai.music_type=t},ikonClick:function(t){this.addisekai.img_type=t},saveClick:function(t){var i=this;if(!this.addisekai.name)return this.$message.error("请输入项目名称");if(!this.addisekai.url)return this.$message.error("请上传文件");if(!this.addisekai.wallet_url)return this.$message.error("请输入钱包地址");if(!this.addisekai.royalties)return this.$message.error("请输入版税");var a=JSON.parse(JSON.stringify(this.addisekai));a.buy_lock=a.buy_lock?1:0,a.is_draft=t,this.$post(a).then(function(a){a.data.status?(i.$message({message:"成功",type:"success"}),t||i.$router.go(-1)):i.$message.error(a.data.msg)})}}},n=d,r=(a("37e6"),a("d539"),a("2877")),u=Object(r["a"])(n,e,s,!1,null,"8f439f0a",null);i["default"]=u.exports},"84b4":function(t,i,a){var e=a("5ca1");e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},"95d5":function(t,i,a){var e=a("40c3"),s=a("5168")("iterator"),l=a("481b");t.exports=a("584a").isIterable=function(t){var i=Object(t);return void 0!==i[s]||"@@iterator"in i||l.hasOwnProperty(e(i))}},a745:function(t,i,a){t.exports=a("f410")},c8bb:function(t,i,a){t.exports=a("54a16")},d2d5:function(t,i,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},d539:function(t,i,a){"use strict";var e=a("e1b9"),s=a.n(e);s.a},e1b9:function(t,i,a){},f410:function(t,i,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);