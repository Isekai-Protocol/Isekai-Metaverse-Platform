(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-038ea951"],{"0451":function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"set"},[i("div",{staticClass:"top u-f-item cursor",on:{click:function(s){return t.$router.go(-1)}}},[t._m(0),i("p",{staticClass:"topTitle"},[t._v("创建专辑")])]),i("div",{staticClass:"establish"},[i("p",{staticClass:"establishItemName",staticStyle:{"margin-bottom":"15px"}},[t._v("专辑类别")]),i("div",{staticClass:"u-f-item mb20"},t._l(t.multipleList,function(s,a){return i("div",{key:a,staticClass:"multipleItem u-f-item cursor",on:{click:function(i){return t.multipleItemClick(s.type)}}},[i("div",{staticClass:"multiple u-f-justify"},[s.type==t.from.type?i("div",{staticClass:"multiplePitch"}):t._e()]),i("p",{staticClass:"multipleName"},[t._v(t._s(s.name))])])}),0),i("p",{staticClass:"establishItemName"},[t._v("专辑封面")]),i("div",{staticClass:"u-f-item mb20"},[i("el-upload",{ref:"mYupload1",staticClass:"upload-demo",attrs:{action:t.action,multiple:!1,"show-file-list":!0,"on-success":t.onCoverSuccess,data:t.uploadingData,accept:".jpg,.jpeg,.png,.gif,.svg"}},[i("div",{staticClass:"headImg u-f-item u-f-justify cursor",staticStyle:{width:"259px"}},[t.from.cover?i("el-image",{staticClass:"img",attrs:{src:t.from.cover,fit:"cover"}}):i("div",{staticStyle:{width:"22px",height:"22px"}},[i("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1)]),i("p",{staticClass:"hint"},[t._v("建议尺寸：278x139")])],1),i("p",{staticClass:"establishItemName"},[t._v("专辑背景")]),i("div",{staticClass:"u-f-item mb20"},[i("el-upload",{ref:"mYupload2",staticClass:"upload-demo",attrs:{action:t.action,multiple:!1,"show-file-list":!0,"on-success":t.onbackgroundSuccess,data:t.uploadingData,accept:".jpg,.jpeg,.png,.gif,.svg"}},[i("div",{staticClass:"headImg u-f-item u-f-justify cursor",staticStyle:{width:"485px"}},[t.from.back_url?i("el-image",{staticClass:"img",attrs:{src:t.from.back_url,fit:"cover"}}):i("div",{staticStyle:{width:"22px",height:"22px"}},[i("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/89.png",alt:""}})])],1)]),i("p",{staticClass:"hint"},[t._v("建议尺寸：2479x700")])],1),i("p",{staticClass:"establishItemName"},[t._v("专辑名称")]),i("div",{staticClass:"inputBox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.from.cate_name,expression:"from.cate_name"}],attrs:{type:"text",name:"",id:"",placeholder:"请输入专辑名称"},domProps:{value:t.from.cate_name},on:{input:function(s){s.target.composing||t.$set(t.from,"cate_name",s.target.value)}}})]),i("p",{staticClass:"establishItemName"},[t._v("专辑描述")]),i("el-input",{staticClass:"elInput",attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:t.from.desc,callback:function(s){t.$set(t.from,"desc",s)},expression:"from.desc"}}),i("div",{staticClass:"u-f-jsb",staticStyle:{width:"600px"},style:{marginBottom:t.from.is_binding?"":"12px"}},[i("p",{staticClass:"establishItemName"},[t._v("添加或删除专辑内的NFT")]),i("div",[i("el-switch",{attrs:{"active-color":"#6A78BA","inactive-color":"#2D3350"},model:{value:t.from.is_binding,callback:function(s){t.$set(t.from,"is_binding",s)},expression:"from.is_binding"}})],1)]),i("el-collapse-transition",[t.from.is_binding?i("div",{staticClass:"roleList"},[i("div",{staticClass:"u-f-jsb"},[i("div",{staticClass:"operation cursor",staticStyle:{"background-color":"#6A78BA"},on:{click:t.nftOperation}},[t._v("添加\n\t\t\t\t\t")]),i("div",{staticClass:"operation cursor",on:{click:t.deleteNft}},[t._v("删除")])]),t.from.nft_data.length?i("div",{staticClass:"list u-f"},[i("swiper",{ref:"swiper",attrs:{options:t.swiperOption,autoplay:!0}},t._l(t.from.nft_data,function(s,a){return i("swiper-slide",{key:a},[i("div",{staticClass:"item"},[i("div",{staticStyle:{width:"162.3px",height:"162.5px"}},[i("el-image",{staticClass:"img",staticStyle:{"border-radius":"10px"},attrs:{src:s.cover,fit:"cover"}})],1),i("p",{staticClass:"name singleLine"},[t._v(t._s(s.name))]),i("p",{staticClass:"code singleLine"},[t._v("#"+t._s(s.code))])])])}),1)],1):i("div",{staticClass:"roleListText"},[t._v("\n\t\t\t\t\t请点击添加并选择NFT\n\t\t\t\t")])]):t._e()]),i("p",{staticClass:"establishItemName"},[t._v("自定义URL")]),i("div",{staticClass:"inputBox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.from.links,expression:"from.links"}],attrs:{type:"text",name:"",id:"",placeholder:"请输入url"},domProps:{value:t.from.links},on:{input:function(s){s.target.composing||t.$set(t.from,"links",s.target.value)}}}),t._m(1)]),i("div",{staticClass:"operation u-f"},[t.from.is_draft?i("div",{staticClass:"save cursor",on:{click:function(s){return t.creatorClick(1)}}},[t._v("保存草稿")]):t._e(),i("div",{staticClass:"creator cursor",on:{click:function(s){return t.creatorClick(0)}}},[t._v(t._s(t.from.is_draft?"创建":"修改"))])])],1),i("popUp",{attrs:{title:"选择NFT",showDialog:t.dialogVisible,width:"1300px"},on:{showDialogClick:function(s){t.dialogVisible=!1}}},[i("div",{staticStyle:{padding:"30px"}},[i("div",{staticClass:"nftList u-f",on:{scroll:t.scroll}},[t._l(t.deleteFalg?t.from.nft_data:t.nftList,function(s,a){return i("div",{key:a,staticClass:"popUpListItem cursor",class:{itemFlag:s.falg},on:{click:function(i){return t.compileClick(s)}}},[s.falg?i("div",{staticClass:"pitchImg"},[i("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img1/71.png",alt:""}})]):t._e(),i("div",{staticClass:"popUpListItemImg"},[i("el-image",{staticClass:"img",staticStyle:{"border-radius":"10px"},attrs:{src:s.cover,alt:"",fit:"cover"}})],1),i("p",{staticClass:"popUpListItemName singleLine"},[t._v(t._s(s.name))]),i("p",{staticClass:"popUpListItemserial singleLine"},[t._v("#"+t._s(s.code))])])}),t._l(10,function(t,s){return i("i",{staticClass:"amplificationicon"})})],2),i("div",{staticClass:"affirm u-f-justify cursor",on:{click:t.affirm}},[t._v("\n\t\t\t\t确认\n\t\t\t")])])])],1)},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticStyle:{width:"21px",height:"19px"}},[i("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/88.png",alt:""}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"inputBoxImg"},[i("img",{staticClass:"img",attrs:{src:"https://ec.wexiang.vip/source/img/90.png",alt:""}})])}],o=(i("7514"),i("ac6a"),i("f3e2"),i("7212")),r=(i("dfa4"),i("50c5")),c=i("4b90"),n={components:{swiper:o["swiper"],swiperSlide:o["swiperSlide"],popUp:r["a"]},data:function(){return{swiperOption:{slidesPerView:"auto",grabCursor:!0,speed:2e3,autoplay:{delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!1}},radio:1,multipleList:[{name:"插画",type:4},{name:"音频",type:2},{name:"文章",type:1},{name:"游戏",type:3}],walletPitch:0,walletList:[{name:"平台币"},{name:"以太坊"}],amountPitch:0,amountList:[{name:"是"},{name:"否"}],value:!1,textarea:"",from:{method:"articles.addalbum",cate_name:"",type:4,desc:"",cover:"",back_url:"",links:"",id:"",is_draft:1,nft_data:[],is_binding:!1},action:c["a"].baseURL,uploadingData:{method:"images.upload"},dialogVisible:!1,role:{page:1},nftList:[],deleteFalg:!1}},created:function(){this.$route.query.id&&this.getcateinfo()},methods:{getcateinfo:function(){var t=this;this.$post({type_id:this.$route.query.id,method:"articles.getcateinfo"}).then(function(s){t.from=s.data.info,t.from.nft_data.forEach(function(t){t.falg=!0})})},multipleItemClick:function(t){this.$route.query.id?this.$message({message:"创建专辑后类别不可修改！",type:"warning"}):(t!=this.from.type&&(this.from.nft_data=[]),this.from.type=t)},walletItemClick:function(t){this.walletPitch=t},amountClick:function(t){this.amountPitch=t},onHadeSuccess:function(t){var s=this;this.$message({message:t.msg,duration:1500,onClose:function(){s.$refs["mYupload"].clearFiles()}}),t.status&&(this.from.headimgUrl=t.data.url,this.from.headimg=t.data.image_id)},onCoverSuccess:function(t){var s=this;this.$message({message:t.msg,duration:1500,onClose:function(){s.$refs["mYupload1"].clearFiles()}}),t.status&&(this.from.cover=t.data.url)},onbackgroundSuccess:function(t){var s=this;this.$message({message:t.msg,duration:1500,onClose:function(){s.$refs["mYupload2"].clearFiles()}}),t.status&&(this.from.back_url=t.data.url)},creatorClick:function(t){var s=this;return this.from.cate_name?this.from.cover?(this.from.is_draft=t,void this.$post(this.from).then(function(i){if(i.data.status){s.$router.push({path:"/framer/albumMmanagement"}),s.$message({message:"成功",type:"success"});var a=s.$store.state.list.framerAlbumList,e=a.find(function(t){return t.id==i.data.data});if(e)a.forEach(function(e,o){e.id==i.data.data&&1==t?(e.desc=s.from.desc,e.type_name=s.from.cate_name,e.cover=s.from.cover,e.is_draft=s.from.is_draft):e.id==i.data.data&&0==t&&a.splice(o,1)});else if(1==t){var o={desc:s.from.desc,type_name:s.from.cate_name,cover:s.from.cover,is_draft:s.from.is_draft,id:i.data.data};a.unshift(o),s.$store.commit("list/onFramerAlbumList",a)}}else s.$message.error(i.data.msg)})):this.$message.error("请上传专辑封面"):this.$message.error("请输入专辑名称")},getdatabytype:function(){var t=this;this.$post({method:"common.getdatabytype",page:this.role.page,limit:30,type:this.from.type,select_ids:this.from.nft_data,cate_id:this.from.id}).then(function(s){t.nftList=s.data.data.list,t.dialogVisible=!0})},scroll:function(){},nftOperation:function(){this.role.page=1,this.deleteFalg=!1,this.getdatabytype()},deleteNft:function(){this.deleteFalg=!0,this.dialogVisible=!0},compileClick:function(t){this.$set(t,"falg",!t.falg)},affirm:function(){var t=this;console.log(this.nftList),this.deleteFalg?(console.log(this.from.nft_data),this.from.nft_data.forEach(function(s,i){s.falg||t.from.nft_data.splice(i,1)})):(this.from.nft_data=[],this.nftList.forEach(function(s){s.falg&&t.from.nft_data.push(s)})),this.dialogVisible=!1}}},l=n,m=(i("074d"),i("2877")),f=Object(m["a"])(l,a,e,!1,null,"0f36047a",null);s["default"]=f.exports},"074d":function(t,s,i){"use strict";var a=i("bce7"),e=i.n(a);e.a},7514:function(t,s,i){"use strict";var a=i("5ca1"),e=i("0a49")(5),o="find",r=!0;o in[]&&Array(1)[o](function(){r=!1}),a(a.P+a.F*r,"Array",{find:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(o)},bce7:function(t,s,i){}}]);